<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ALTTP Twitch Tests</title>
	<link rel="import" href="elements/molecules/twitch-player/twitch-player.html">
	<style type="text/css">
	iframe{
		transform-origin: left top;
	}
	</style>
</head>
<body>
	<div id="container">
		<layout-twitch></layout-twitch>
	</div>

	<dom-module id="layout-twitch">
		<template>
			<template is="dom-repeat" items="[[runners]]" as="runner">
				<twitch-player runner-stream="[[runner.stream]]"></twitch-player>
			</template>
		</template>

		<script>
			const currentRun = nodecg.Replicant("currentRun");
			Polymer({
				is: 'layout-twitch',

				properties: {
                    itemTrackers: Array,
					baseUrl: String,
					runners: Array
				},

				ready() {
					currentRun.on('change', newVal =>{
						if(!newVal || !newVal.runners)
							return;
						
						this.runners = newVal.runners.slice(0);
					});
				}
			});
		</script>
    </dom-module>
    
</body>
</html>
